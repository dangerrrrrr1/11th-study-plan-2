<script>
const chapters = [
    "Physical World", "Kinematics", "Laws of Motion", "Rotational Motion", "Gravitation", "Properties of Matter", "Thermodynamics", "Behaviour of Perfect Gas and Kinetics", "Oscillations", "Waves",
    "Some Basic Concepts of Chemistry", "Structure of Atom", "Classification of Elements and Periodicity in Properties", "Chemical Bonding and Molecular Structure", "Thermodynamics", "Equilibrium", "Redox Reactions", "Organic Chemistry – Some Basic Principles and Techniques", "Hydrocarbons",
    "The Living World", "Biological Classification", "Plant Kingdom", "Animal Kingdom", "Morphology of Flowering Plants", "Anatomy of Flowering Plants", "Structural Organisation in Animals", "Cell – The Unit of Life", "Biomolecules", "Cell Cycle and Cell Division", "Photosynthesis in Higher Plants"
];

const activities = [
    "Read NCERT thoroughly, make short notes.",
    "Watch related video, clear doubts, practice questions.",
    "Read, revise, make notes for 2nd chapter.",
    "Watch video, solve questions for 2nd chapter.",
    "Revise both chapters, solve small quiz or mock questions.",
    "Combine revision — solve a mixed question set from these chapters.",
    "Chill, revise weak points, or practice a small test."
];

const start = new Date("2025-07-07"); // fixed start date
const tbody = document.querySelector("tbody");

function formatDate(date) {
    return date.toISOString().split('T')[0];
}

// Today’s date (formatted)
const today = formatDate(new Date());

// Load saved checkbox states
const saved = JSON.parse(localStorage.getItem("studyPlanTicks") || "{}");

function saveTick(id, value) {
    saved[id] = value;
    localStorage.setItem("studyPlanTicks", JSON.stringify(saved));
}

for (let i = 0; i < chapters.length; i += 2) {
    for (let j = 0; j < 7; j++) {
        const row = document.createElement("tr");
        const date = new Date(start);
        date.setDate(start.getDate() + (i / 2) * 7 + j);
        const dateStr = formatDate(date);
        const chapter = j < 2 ? chapters[i] : chapters[i + 1];
        const activity = activities[j];
        const uniqueId = `${dateStr}_${chapter.replace(/\s+/g, "_")}`;

        row.innerHTML = `
            <td>${dateStr}</td>
            <td>${chapter}</td>
            <td>${activity}</td>
            <td><input type="checkbox" id="${uniqueId}"></td>
        `;

        // ✅ Highlight today's row
        if (dateStr === today) {
            row.style.backgroundColor = "#d1f0d1"; // Light green
            row.style.fontWeight = "bold";
        }

        const checkbox = row.querySelector("input");
        checkbox.checked = saved[uniqueId] || false;
        checkbox.addEventListener("change", () => {
            saveTick(uniqueId, checkbox.checked);
        });

        tbody.appendChild(row);
    }
}
</script>
